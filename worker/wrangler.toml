name = "oddswize-api"
main = "src/index.ts"
compatibility_date = "2024-01-01"
account_id = "36d5f0f12fb04b2134399e7c20d90f46"

# KV Namespaces for data storage
[[kv_namespaces]]
binding = "ODDS_CACHE"
id = "28eda8030f2440689f8837daffdc67e3"

[[kv_namespaces]]
binding = "MATCHES_DATA"
id = "8df6916f071d4dab86818d650393e0c2"

# Durable Objects for live odds streaming
[[durable_objects.bindings]]
name = "ODDS_STREAM"
class_name = "OddsStream"

# Durable Object migrations
[[migrations]]
tag = "odds-stream-v1"
new_sqlite_classes = ["OddsStream"]

# D1 database for canonical leagues/fixtures
[[d1_databases]]
binding = "D1"
database_name = "oddswize-d1"
database_id = "1aff11f0-6871-4383-a671-170a62953327"

# Environment variables
[vars]
ENVIRONMENT = "production"
CORS_ORIGIN = "*"

# Secrets (set via: wrangler secret put API_SECRET)
# API_SECRET = "your-secret-key" (use wrangler secret put)
# TURNSTILE_SECRET = "your-turnstile-secret" (use wrangler secret put)

# Development settings
[env.dev]
name = "oddswize-api-dev"
[env.dev.vars]
ENVIRONMENT = "development"
CORS_ORIGIN = "*"

# Scheduled triggers for data refresh
[triggers]
crons = ["*/15 * * * *"]  # Every 15 minutes
